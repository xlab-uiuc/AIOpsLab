#!/bin/bash
tasks=(
k8s_target_port-misconfig-detection-1
k8s_target_port-misconfig-detection-2
k8s_target_port-misconfig-detection-3
auth_miss_mongodb-detection-1
revoke_auth_mongodb-detection-1
revoke_auth_mongodb-detection-2
user_unregistered_mongodb-detection-1
user_unregistered_mongodb-detection-2
misconfig_app_hotel_res-detection-1
scale_pod_zero_social_net-detection-1
assign_to_non_existent_node_social_net-detection-1
container_kill-detection
pod_failure_hotel_res-detection-1
pod_kill_hotel_res-detection-1
network_loss_hotel_res-detection-1
network_delay_hotel_res-detection-1
noop_detection_hotel_reservation-1
noop_detection_social_network-1
astronomy_shop_ad_service_failure-detection-1
astronomy_shop_ad_service_high_cpu-detection-1
astronomy_shop_ad_service_manual_gc-detection-1
astronomy_shop_cart_service_failure-detection-1
astronomy_shop_image_slow_load-detection-1
astronomy_shop_kafka_queue_problems-detection-1
astronomy_shop_payment_service_failure-detection-1
astronomy_shop_payment_service_unreachable-detection-1
astronomy_shop_product_catalog_service_failure-detection-1
astronomy_shop_recommendation_service_cache_failure-detection-1
redeploy_without_PV-detection-1
wrong_bin_usage-detection-1
noop_detection_astronomy_shop-1
k8s_target_port-misconfig-localization-1
k8s_target_port-misconfig-localization-2
k8s_target_port-misconfig-localization-3
auth_miss_mongodb-localization-1
revoke_auth_mongodb-localization-1
revoke_auth_mongodb-localization-2
user_unregistered_mongodb-localization-1
user_unregistered_mongodb-localization-2
misconfig_app_hotel_res-localization-1
scale_pod_zero_social_net-localization-1
assign_to_non_existent_node_social_net-localization-1
container_kill-localization
pod_failure_hotel_res-localization-1
pod_kill_hotel_res-localization-1
network_loss_hotel_res-localization-1
network_delay_hotel_res-localization-1
astronomy_shop_ad_service_failure-localization-1
astronomy_shop_ad_service_high_cpu-localization-1
astronomy_shop_ad_service_manual_gc-localization-1
astronomy_shop_cart_service_failure-localization-1
astronomy_shop_image_slow_load-localization-1
astronomy_shop_kafka_queue_problems-localization-1
astronomy_shop_payment_service_failure-localization-1
astronomy_shop_payment_service_unreachable-localization-1
astronomy_shop_product_catalog_service_failure-localization-1
astronomy_shop_recommendation_service_cache_failure-localization-1
wrong_bin_usage-localization-1
k8s_target_port-misconfig-analysis-1
k8s_target_port-misconfig-analysis-2
k8s_target_port-misconfig-analysis-3
assign_to_non_existent_node_social_net-analysis-1
scale_pod_zero_social_net-analysis-1
user_unregistered_mongodb-analysis-1
user_unregistered_mongodb-analysis-2
revoke_auth_mongodb-analysis-1
revoke_auth_mongodb-analysis-2
auth_miss_mongodb-analysis-1
misconfig_app_hotel_res-analysis-1
redeploy_without_PV-analysis-1
wrong_bin_usage-analysis-1
k8s_target_port-misconfig-mitigation-1
k8s_target_port-misconfig-mitigation-2
k8s_target_port-misconfig-mitigation-3
scale_pod_zero_social_net-mitigation-1
user_unregistered_mongodb-mitigation-1
user_unregistered_mongodb-mitigation-2
revoke_auth_mongodb-mitigation-1
revoke_auth_mongodb-mitigation-2
auth_miss_mongodb-mitigation-1
misconfig_app_hotel_res-mitigation-1
redeploy_without_PV-mitigation-1
wrong_bin_usage-mitigation-1
assign_to_non_existent_node_social_net-mitigation-1
)

mkdir -p eval
for task_name in "${tasks[@]}"
do
    echo "Running $task_name"
    current_date_time=$(date +"%m-%d_%H-%M-%S")
    output_dir="eval/${current_date_time}-${task_name}"
    mkdir -p $output_dir
    ./run_task.sh $task_name 2>&1 | tee $output_dir/run.log
done
